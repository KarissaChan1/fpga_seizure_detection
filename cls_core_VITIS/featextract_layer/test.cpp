#include <cmath>
#include <algorithm>
#include <string>
#include <iostream>
#include <fstream>
#include "featextract.h"

using namespace std;

int main(){
	
float adc_input[256] = { 0.441397,0.00249374,0.00249374,0.00249374,0.00249374,-0.0224439,-0.0124688,0.0573566,0.0623441,-0.0473816,-0.0922693,-0.0473816,-0.0124688,0.206982,0.416459,0.416459,0.406484,0.55611,0.690773,0.725686,0.800499,0.860349,0.860349,0.895262,0.890274,0.830424,0.875312,0.890274,0.870324,0.845387,0.915212,0.9601,0.925187,0.9202,0.945137,1,0.985037,0.9601,0.945137,0.910224,0.875312,0.805486,0.670823,0.581047,0.521197,0.436409,0.346633,0.371571,0.376559,0.291771,0.226933,0.19202,0.137157,0.0872818,0.0673317,0.0174564,-0.0174564,-0.0623441,-0.15212,-0.246883,-0.226933,-0.236908,-0.311721,-0.376559,-0.361596,-0.326683,-0.366584,-0.371571,-0.366584,-0.381546,-0.336658,-0.296758,-0.291771,-0.256858,-0.23192,-0.226933,-0.162095,-0.0274314,0.0972569,0.162095,0.21197,0.356609,0.496259,0.526185,0.551122,0.586035,0.591022,0.625935,0.625935,0.61596,0.63591,0.630923,0.640898,0.660848,0.670823,0.680798,0.620948,0.521197,0.521197,0.481297,0.391521,0.296758,0.246883,0.187032,0.0972569,0.0224439,-0.0922693,-0.157107,-0.15212,-0.221945,-0.301746,-0.321696,-0.346633,-0.496259,-0.630923,-0.640898,-0.695761,-0.725686,-0.715711,-0.770574,-0.820449,-0.810474,-0.860349,-0.900249,-0.805486,-0.700748,-0.700748,-0.665835,-0.55611,-0.486284,-0.491272,-0.491272,-0.526185,-0.551122,-0.561097,-0.57606,-0.625935,-0.640898,-0.705736,-0.775561,-0.795511,-0.795511,-0.800499,-0.860349,-0.930175,-0.895262,-0.840399,-0.875312,-0.885287,-0.885287,-0.875312,-0.875312,-0.870324,-0.890274,-0.905237,-0.890274,-0.870324,-0.860349,-0.810474,-0.780549,-0.875312,-1,-0.98005,-0.955112,-0.98005,-0.94015,-0.885287,-0.825436,-0.725686,-0.625935,-0.59601,-0.546135,-0.391521,-0.331671,-0.296758,-0.197007,-0.157107,-0.236908,-0.276808,-0.236908,-0.276808,-0.336658,-0.346633,-0.381546,-0.356608,-0.27182,-0.23192,-0.182045,-0.00748134,0.127182,0.167082,0.23192,0.336658,0.436409,0.456359,0.516209,0.541147,0.546135,0.55611,0.496259,0.376559,0.331671,0.23192,0.147132,0.142145,0.201995,0.241895,0.236908,0.241895,0.27182,0.351621,0.351621,0.351621,0.396509,0.446384,0.476309,0.436409,0.356609,0.216958,0.122195,0.0623441,-0.0174564,-0.00748134,-0.00249374,-0.107232,-0.147132,-0.0673317,-0.0174564,0.0274315,0.107232,0.201995,0.341646,0.501247,0.59601,0.680798,0.735661,0.805486,0.855362,0.865337,0.925187,0.9202,0.795511,0.660848,0.59601,0.511222,0.456359,0.376559,0.311721,0.256858,0.256858,0.23192,0.27182,0.416459,0.581047,0.610973,0.645885 };
float d3_coeffs[32] = { -0.534309,-0.00569089,-0.0778893,-0.0267991,0.0179959,-0.124244,0.118629,0.0200957,0.0509611,0.050865,-0.0266258,0.0683605,-0.118274,0.0591551,-0.0878146,0.0988216,-0.106398,0.0759076,0.0651875,-0.0352963,-0.0955825,0.10287,-0.213631,0.320944,-0.235037,-0.0486982,0.0501417,-0.225351,0.313111,-0.0404718,-0.163486,0.380331 };
float d4_coeffs[16] = { -0.175162,-0.182591,0.207411,0.288644,0.383278,-0.216978,-0.037651,0.436396,-0.35946,0.487884,0.144871,-0.526576,-0.373356,0.608252,1.03958,-1.15673 };
float d5_coeffs[8] = { 1.40426,-2.55092,1.83739,-1.99425,-0.0676623,1.22642,-0.703951,0.786528 };
float a5_coeffs[8] = { 0.325043,1.45921,-3.61184,-4.46556,-0.107141,2.13939,2.23998,3.50211 };

float data[200000];
int i_addr = 0;

    for(int i=0; i<256; i_addr++, i++)  
    {
       data[i] = adc_input[i];
    }

    for(int i=0; i<32; i_addr++, i++)
    {
       data[i_addr] = d3_coeffs[i];
    }
    for (int i = 0; i < 16; i_addr++, i++)
    {
        data[i_addr] = d4_coeffs[i];
    }

    for(int i=0; i<8; i_addr++, i++)
    {
       data[i_addr] = a5_coeffs[i];
    }

    for(int i=0; i<8; i_addr++, i++)
    {
       data[i_addr] = d5_coeffs[i];
    }




	float* mem = data;

	feature_extract(mem, 0,1280,256,32,16,8,8);

   
    ofstream myfile("featvec.txt");
    for (int i = 0; i < 10; i++) {
        cout << data[320 + i]<<endl;
        myfile << data[320 + i] << ",";

    }
    myfile.close();



return 0;	

}